# 冰岩实习-无限机兵_ZKX

感谢前辈们的时间宽容！！！！

虽然还是很仓促www，但这是我的问题，10.1~10.8都在旅游or赶路，只做了一丢丢，九号又忙别的去了，基本上就是从10.10下午才开始做。

一开始看到题目就想着，没有做过3D的，尝试一下，结果没想到，难难难，后悔做3D了。

因为实在是太赶，完全没有做版本管理和更新日志，这里写一下开发简介吧。

然后其实我没玩过无限机兵（），所以一些内容基本就是看个视频模仿做一下。

### 控制

WSAD移动，鼠标左键轻攻击，右键重攻击，E释放术式（只做了那个惩戒雷枪），F释放框架能力（盾牌能力），R进行处决（需要人物在敌人背后），Shift闪避，奔跑（长按Shift，闪避动作结束后开始奔跑，参考永劫无间）

### 动画素材

动画素材来源于Mixamo，主要就是僵尸和主角，把模型下下来，再把动画片段弄出来，再调参数，防止位移、循环等等。

### 基础控制

基础控制用InputSystem的InputAction来实现键盘的点击，但是手柄适配没来得及做了。

通过状态机来实现角色的控制。

核心是将控制的检测放在PlayerController中，在不同状态中进行控制处理与切换，包括10个状态。

在不同的状态的Update中调用PlayerController的不同控制检测函数，实现状态的切换。

同时将角色的Animator与状态机联动，实现动画的丝滑切换。

视角的切换使用了Cinemachine插件。

### 基础敌人

做了一个僵尸的敌人，也同样使用状态机在不同状态切换，包括：追击、攻击、挨打、待机、被处决。

具体来说，当玩家距离超过10米，是idle，小于10米会开始追击，小于攻击距离就开始攻击。

对敌人的攻击采用动画帧事件＋碰撞体实现。

当玩家在敌人身后的时候，玩家可以按R进行处决，此时敌人会处于idle动画不动（没来得及找资源），玩家也直接使用了重攻击的动画，伤害也和重攻击一样。

### 同步率

同步率和玩家血量使用PlayerManager单例实现，并且在单例中使用事件通知其他模块血量、同步率改变

框架能力实现了盾牌能力，点击F会进入防御姿态，扣除10点同步率，这个时候被攻击玩家会后退一段距离。

术式实现了惩戒雷枪，点击E消耗10点同步率，对锁定的敌人释放技能。

### UI系统

目前做了血量条、同步率条、敌人标识点和锁定点。

血量条同步率条订阅了PlayerManager的事件，实现动态更新，并且实现了数值变化时的进度条滑动效果。

当敌人在玩家视野内，会选择一个最近的敌人显示标识点和锁定点，可以处决的时候锁定点为红色。

### 总结

还有好多内容没做，本来还想做个预输入，战技也没来得及做，boss也没来得及做，感觉这类游戏的灵魂就是boss。

还请学长学姐们拷打手下留情。